## 1. 引言
在机器学习与数据挖掘中，常常需要判断两个向量之间的“相似程度”。  
例如：
- **推荐系统**：用户与物品向量的匹配 
- **自然语言处理**：句子/文档向量的相似性  
- **计算机视觉**：图像特征向量的检索  

因此，选择合适的 **向量相似度度量方法** 是工程应用中的关键问题。

---

## 2. 常见的向量相似度度量方法

### 2.1 余弦相似度 (Cosine Similarity)
- **公式**：
  $$
  \text{cosine\_sim}(x, y) = \frac{x \cdot y}{\|x\| \|y\|}
  $$

- **特点**：
  - 只关注向量的方向，不关心向量的长度  
  - 结果范围 \([-1, 1]\)，越接近 1 表示越相似  

- **适用场景**：
  - 文本相似度（TF-IDF、词向量）  
  - 推荐系统中的用户/物品向量匹配  
  - 高维稀疏向量

---

### 2.2 欧式距离 (Euclidean Distance)
- **公式**：
  $$
  d(x, y) = \sqrt{\sum_{i=1}^{n} (x_i - y_i)^2}
  $$

- **特点**：
  - 衡量两个点在空间中的真实“几何距离”  
  - 对数值大小敏感  

- **适用场景**：
  - 聚类（如 K-Means）  
  - 图像检索（低维特征）  
  - 数据规模不大、分布较均匀的情况

---

### 2.3 点积 (Dot Product)
- **公式**：
$$
  x \cdot y = \sum_{i=1}^{n} x_i y_i
  $$

- **特点**：
  - 与向量的长度相关  
  - 本质上是“未归一化的余弦相似度”  

- **适用场景**：
  - 神经网络的嵌入向量比较（推荐系统 Embedding）  
  - 高效批量计算（GPU 矩阵乘法加速）

---

## 3. 方法对比

| 方法         | 是否考虑方向 | 是否考虑大小 | 典型场景 |
|--------------|-------------|-------------|----------|
| 余弦相似度   | ✅           | ❌           | 文本向量、稀疏特征 |
| 欧式距离     | ✅           | ✅           | 聚类、图像特征匹配 |
| 点积         | ✅           | ✅           | 推荐系统、深度学习 Embedding |

**小结**：
- 如果只关心方向（相似的趋势）：**余弦相似度**  
- 如果要考虑真实的空间位置：**欧式距离**  
- 如果用于大规模嵌入比较（GPU 友好）：**点积**

---

## 4. 其他常见度量方法（扩展）
- **曼哈顿距离 (L1 Norm)**  
  $$
  d(x, y) = \sum |x_i - y_i|
  $$  
  在高维空间对异常值更鲁棒  

- **闵可夫斯基距离 (Minkowski Distance)**  
  欧式距离和曼哈顿距离的推广  

- **Jaccard 相似度**  
  $$
  J(A,B) = \frac{|A \cap B|}{|A \cup B|}
  $$
  适合集合或稀疏二进制向量  

- **Hamming 距离**  
  计算二进制向量不同位的数量，常用于纠错码或二进制特征比较

---

## 5. 实际应用中的考虑

- **数据归一化**  
  - 对于欧式距离和点积，向量长度会影响结果  
  - 建议在比较前进行 **L2 归一化**  ,但L2归一化后这三种计算方式没有对比意义。经过L2归一化后，**点积和余弦相似度在数值上完全相同**，而欧式距离跟它们存在**单调关系**(数值不同但排序等价)

- **高维问题**  
  - 在高维空间中，“距离退化”现象严重（所有点都差不多远）  
  - 通常会选择余弦相似度或借助近似搜索方法  

- **相似度搜索工具**  
  - [[AI/RAG/tools/Faiss]]：GPU 加速的相似度搜索库[Faiss (Facebook AI)](https://github.com/facebookresearch/faiss)
  - [Annoy](https://github.com/spotify/annoy)：适合内存高效的 [[ANN]]（近似最近邻）搜索  
  - [[HNSW]]：基于小世界图的高效相似度搜索  
---

## 6. 总结
- **余弦相似度**：适合文本、稀疏向量  
- **欧式距离**：适合聚类、低维特征匹配  
- **点积**：适合推荐系统和深度学习场景  
- 实际工程中往往需要结合 **归一化、近似搜索库** 来提升效果和效率

---
