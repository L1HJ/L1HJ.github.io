---
title: "Function Calling 与 MCP 协议｜深究 MCP 协议的设计  - 飞书云文档"
source: "https://oigi8odzc5w.feishu.cn/wiki/LWqEwXNkBibT0ykrbI0cvptBnAf"
author:
published:
created: 2025-08-30
description:
tags:
  - "clippings"
---
调用指令示例（OpenAI Function Calling）

{

"function\_call":{

"name":"getWeather",

"arguments":{

"location":"Guangzhou",

"date":"2025-07-17"

}

}

}

4.

后端解析调用指令，并执行实际的函数调用

后端接收到模型返回的调用指令后， 解析调用指令 ，得到函数名称和参数，执行对应的方法（如调用天气查询函数），并获取结果。调用指令例如：

5.

后端第二次向大模型 API 发起请求，将刚才的调用结果和其他上下文信息一起传给模型，生成最终的回复

后端将函数执行结果 + 其他上下文信息（包括用户原始输入）传给模型，模型判断此时已有足够的信息回答问题，不再需要调用函数了，于是直接生成最终结果，例如：“广州今天35度，暴雨，建议在室内活动”。

存在的问题

1.

后端应用适配不同大模型时存在大量冗余开发

2.

可选模型有限

二、MCP 协议

3.1 要解决的问题

1.

工具接入的冗余开发问题

AI 应用接入他人开发的新工具需完整 copy 代码和函数描述，接入几个就要 copy 几次。

2.

工具复用困难

环境问题导致 copy 的代码不一定能跑；很多企业不提供可供 copy 的源码；跨语言的代码 copy 了没用。

3.2 如何解决问题

💡

如果是你会怎么解决以上问题？（假设现在完全没有 MCP 协议）

从问题出发

\-> 冗余开发、复用困难问题基本都是由 copy 代码带来的，怎么才能用上别人的方法，但又不用 copy 别人的代码？

•

思路一： 导包式接入 ，AI 应用开发者将工具代码拉到本地调用。

◦

可行吗？⚠️ 跨语言调用 问题无法解决

◦

跨语言问题是客观无解的吗？-> 能否本地另起一个进程运行该语言的执行环境，工具代码原封不动运行在对应语言环境中，AI 应用再通过进程间通信（如管道、套接字）获取标准化的返回结果？

◦

所以可行吗？✅ -> 并且，这种接入方式更适合被称为“ 本地服务式接入 ”

•

思路二： 远程服务式接入 ，工具开发者将工具独立部署，封装成标准化 API，约好统一的请求/响应格式，AI应用开发者只需按规定传入参数并解析返回值即可，不需要关心工具的实现语言、运行环境、内部逻辑。

◦

可行吗？✅

从目标出发

\-> 接入工具、复用工具对开发者来说最理想的方式是什么？

•

开发者只需添加一条 配置 （如工具的唯一标识或访问地址）就可以接入自己 / 别人的工具

\-> 当前的非理想状态是什么？

•

当前每新增一个工具，开发者需要在链路中做 两处 人工适配：

a.

补充工具描述

b.

补充工具代码

\-> 从非理想状态到理想状态必须满足什么条件？

•

要让“配置替代人工适配”，必须满足以下两点：

◦

新增配置后，AI 应用后端要能根据配置 自动获取工具的描述信息

◦

新增配置后，AI 应用后端要能根据配置 自动定位工具调用入口并执行调用

评论（1）

跳转至首条评论

全文评论

飞书用户617 8月18日 23:40

我见过 写 MC P 最全面的🤙🤙🤙

飞书用户3767 8月20日 23:58

大晚上的给我看精神了

0 字

- 帮助中心

- 效率指南